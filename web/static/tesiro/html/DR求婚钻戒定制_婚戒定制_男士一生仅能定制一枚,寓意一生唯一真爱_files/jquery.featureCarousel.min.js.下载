/*!uglify*/
define(function(require,exports,module){require("jquery"),function(a){a.fn.featureCarousel=function(f){if(this.length>1)return this.each(function(){a(this).featureCarousel(f)}),this;f=a.extend({},a.fn.featureCarousel.defaults,f||{});var q={currentCenterNum:f.startingFeature,containerWidth:0,containerHeight:0,largeFeatureWidth:0,largeFeatureHeight:0,smallFeatureWidth:0,smallFeatureHeight:0,totalFeatureCount:a(this).children("div").length,currentlyMoving:!1,featuresContainer:a(this),featuresArray:[],containerIDTag:"#"+a(this).attr("id"),timeoutVar:null,rotationsRemaining:0,itemsToAnimate:0,borderWidth:0},j=function(w){if(1==f.preload){var u=q.featuresContainer.find("img"),t=0,v=u.length;u.each(function(y,z){var x=new Image;a(x).bind("load error",function(){t++,t==v&&w()}),x.src=z.src})}else w()},m=function(t){return q.featuresArray[t-1]},c=function(t){return t-1==0?q.totalFeatureCount:t-1},i=function(t){return t+1>q.totalFeatureCount?1:t+1},e=function(){q.containerWidth=q.featuresContainer.width(),q.containerHeight=q.featuresContainer.height();var t=a(q.containerIDTag).find(".carousel-image:first");f.largeFeatureWidth>1?q.largeFeatureWidth=f.largeFeatureWidth:f.largeFeatureWidth>0&&f.largeFeatureWidth<1?q.largeFeatureWidth=t.width()*f.largeFeatureWidth:q.largeFeatureWidth=t.outerWidth(),f.largeFeatureHeight>1?q.largeFeatureHeight=f.largeFeatureHeight:f.largeFeatureHeight>0&&f.largeFeatureHeight<1?q.largeFeatureHeight=t.height()*f.largeFeatureHeight:q.largeFeatureHeight=t.outerHeight(),f.smallFeatureWidth>1?q.smallFeatureWidth=f.smallFeatureWidth:f.smallFeatureWidth>0&&f.smallFeatureWidth<1?q.smallFeatureWidth=t.width()*f.smallFeatureWidth:q.smallFeatureWidth=t.outerWidth()/2,f.smallFeatureHeight>1?q.smallFeatureHeight=f.smallFeatureHeight:f.smallFeatureHeight>0&&f.smallFeatureHeight<1?q.smallFeatureHeight=t.height()*f.smallFeatureHeight:q.smallFeatureHeight=t.outerHeight()/2},b=function(){f.displayCutoff>0&&f.displayCutoff<q.totalFeatureCount&&(q.totalFeatureCount=f.displayCutoff),q.featuresContainer.find(".carousel-feature").each(function(t){t<q.totalFeatureCount&&(q.featuresArray[t]=a(this))}),"medium"!=q.featuresContainer.find(".carousel-feature").first().css("borderLeftWidth")&&(q.borderWidth=2*parseInt(q.featuresContainer.find(".carousel-feature").first().css("borderLeftWidth"))),q.featuresContainer.find(".carousel-feature").each(function(){a(this).css({left:q.containerWidth/2-q.smallFeatureWidth/2-q.borderWidth/2,width:q.smallFeatureWidth,height:q.smallFeatureHeight,top:f.smallFeatureOffset+f.topPadding,opacity:0})}).find(".carousel-image").css({width:q.smallFeatureWidth}),f.captionBelow&&q.featuresContainer.find(".carousel-caption").css("position","relative"),q.totalFeatureCount<4?q.itemsToAnimate=q.totalFeatureCount:q.itemsToAnimate=4,q.featuresContainer.find(".carousel-caption").hide()},r=function(){a.each(q.featuresArray,function(x){a(this).data("setPosition",x+1)});var w=c(f.startingFeature);q.currentCenterNum=w;var v=m(w);v.data("position",1);var u=v.prevAll();u.each(function(x){a(this).data("position",q.totalFeatureCount-x)});var t=v.nextAll();t.each(function(x){void 0!=a(this).data("setPosition")&&a(this).data("position",x+2)}),"caption"==f.counterStyle&&a.each(q.featuresArray,function(){var y=c(a(this).data("position")),x=a("<span></span>");x.addClass("numberTag"),x.html("("+y+" of "+q.totalFeatureCount+") "),a(this).find(".carousel-caption p").prepend(x)})},h=function(){if(f.trackerIndividual){var z=a("<ul></ul>");z.addClass("tracker-individual-container");for(var y=0;y<q.totalFeatureCount;y++){var t=y+1,x=a("<div>"+t+"</div>");x.addClass("tracker-individual-blip"),x.css("cursor","pointer"),x.attr("id","tracker-"+(y+1));var w=a("<li></li>");w.append(x),w.css("float","left"),w.css("list-style-type","none"),z.append(w)}a(q.containerIDTag).append(z),z.hide().show()}if(f.trackerSummation){var v=a("<div></div>");v.addClass("tracker-summation-container");var u=a("<span></span>").addClass("tracker-summation-current").text(f.startingFeature),B=a("<span></span>").addClass("tracker-summation-total").text(q.totalFeatureCount),A=a("<span></span>").addClass("tracker-summation-middle").text(" of ");v.append(u).append(A).append(B),a(q.containerIDTag).append(v)}},s=function(x,t){if(f.trackerIndividual){var u=q.featuresContainer.find(".tracker-individual-container"),v=u.find("#tracker-"+x),w=u.find("#tracker-"+t);v.removeClass("tracker-individual-blip-selected"),w.addClass("tracker-individual-blip-selected")}if(f.trackerSummation){var u=q.featuresContainer.find(".tracker-summation-container");u.find(".tracker-summation-current").text(t)}},p=function(u){if(clearTimeout(q.timeoutVar),!u&&0!=f.autoPlay){var t=Math.abs(f.autoPlay)<f.carouselSpeed?f.carouselSpeed:Math.abs(f.autoPlay);q.timeoutVar=setTimeout(function(){f.autoPlay>0?k(!0,1):k(!1,1)},t)}},d=function(t){a.each(q.featuresArray,function(){var u;u=0==t?i(a(this).data().position):c(a(this).data().position),a(this).data("position",u)})},o=function(y,C){var w,t,v,z,u,A,x,B=y.data("position");x=1==C?c(B):i(B),1==B&&f.leavingCenter(y),1==x?(w=q.largeFeatureWidth,t=q.largeFeatureHeight,v=f.topPadding,u=y.css("z-index"),z=q.containerWidth/2-q.largeFeatureWidth/2-q.borderWidth/2,A=1):(w=q.smallFeatureWidth,t=q.smallFeatureHeight,v=f.smallFeatureOffset+f.topPadding,u=1,A=.4,x==q.totalFeatureCount?z=f.sidePadding:2==x?z=q.containerWidth-q.smallFeatureWidth-f.sidePadding-q.borderWidth:(z=q.containerWidth/2-q.smallFeatureWidth/2-q.borderWidth/2,A=0)),1==B&&y.find(".carousel-caption").hide(),y.animate({width:w,height:t,top:v,left:z,opacity:A},f.carouselSpeed,f.animationEasing,function(){if(1==x&&(f.captionBelow&&y.css("height","auto"),y.find(".carousel-caption").fadeTo("fast",.85),f.movedToCenter(y)),q.rotationsRemaining=q.rotationsRemaining-1,y.css("z-index",u),(f.trackerIndividual||f.trackerSummation)&&1==x){var F,E=q.featuresContainer.find(".carousel-feature").index(y)+1;F=0==C?i(E):c(E),s(F,E)}var G=q.rotationsRemaining/q.itemsToAnimate;G%1==0&&(q.currentlyMoving=!1,d(C),q.rotationsRemaining>0&&l(C)),p(!1)}).find(".carousel-image").animate({width:w,height:t},f.carouselSpeed,f.animationEasing).end()},l=function(w){q.currentlyMoving=!0;var x,v,t,u;1==w?(x=m(i(q.currentCenterNum)),v=m(q.currentCenterNum),t=m(i(i(q.currentCenterNum))),u=m(c(q.currentCenterNum)),q.currentCenterNum=i(q.currentCenterNum)):(x=m(c(q.currentCenterNum)),v=m(c(c(q.currentCenterNum))),t=m(q.currentCenterNum),u=m(i(q.currentCenterNum)),q.currentCenterNum=c(q.currentCenterNum)),w?v.css("z-index",3):t.css("z-index",3),x.css("z-index",4),o(v,w),o(x,w),o(t,w),q.totalFeatureCount>3&&o(u,w)},k=function(v,u){if(0==q.currentlyMoving){var t=u*q.itemsToAnimate;q.rotationsRemaining=t,l(v)}},g=function(x,w){var v,u=1,t=1;for(v=x;(v=c(v))!=w;)u++;for(v=x;(v=i(v))!=w;)t++;return u<t?u*-1:t};return a(f.leftButtonTag).live("click",function(){k(!1,1)}),a(f.rightButtonTag).live("click",function(){k(!0,1)}),q.featuresContainer.find(".carousel-feature").click(function(){var t=a(this).data("position");2==t?k(!0,1):t==q.totalFeatureCount&&k(!1,1)}).mouseover(function(){if(0==q.currentlyMoving){var t=a(this).data("position");2!=t&&t!=q.totalFeatureCount||a(this).css("opacity",.8)}f.pauseOnHover&&p(!0),f.stopOnHover&&(f.autoPlay=0)}).mouseout(function(){if(0==q.currentlyMoving){var t=a(this).data("position");2!=t&&t!=q.totalFeatureCount||a(this).css("opacity",.4)}f.pauseOnHover&&p(!1)}),a("a",q.containerIDTag).live("click",function(u){var t=a(this).parentsUntil(q.containerIDTag);t.each(function(){var v=a(this).data("position");if(void 0!=v){if(1!=v)return v==q.totalFeatureCount?k(!1,1):2==v&&k(!0,1),u.preventDefault(),!1;f.clickedCenter(a(this))}})}),a(".tracker-individual-blip",q.containerIDTag).live("click",function(){var t=a(this).attr("id").substring(8),v=q.featuresContainer.find(".carousel-feature").eq(t-1).data("position"),u=q.currentCenterNum;if(t!=u){var w=g(1,v);w<0?k(!1,w*-1):k(!0,w)}}),this.initialize=function(){return j(function(){e(),b(),r(),h(),k(!0,1)}),this},this.next=function(){k(!0,1)},this.prev=function(){k(!1,1)},this.pause=function(){p(!0)},this.start=function(){p(!1)},this.initialize()},a.fn.featureCarousel.defaults={largeFeatureWidth:0,largeFeatureHeight:0,smallFeatureWidth:.5,smallFeatureHeight:.5,topPadding:20,sidePadding:50,smallFeatureOffset:50,startingFeature:1,carouselSpeed:1e3,autoPlay:4e3,pauseOnHover:!0,stopOnHover:!1,trackerIndividual:!0,trackerSummation:!0,preload:!0,displayCutoff:0,animationEasing:"swing",leftButtonTag:"#carousel-left",rightButtonTag:"#carousel-right",captionBelow:!1,movedToCenter:a.noop,leavingCenter:a.noop,clickedCenter:a.noop}}(jQuery)});