/*!uglify*/
define(function(require,exports,module){require("jquery"),function(window,document,undefined){var ready={index:0,timer:{},end:{}},popupBox={open:function(options){var o=new PopupBox(options);return o.boxIndex},msg:function(content,options){var defaultConfig={type:1,className:"customLayer-msg",shadeClassName:"customLayer-msgShade",shade:!1,shadeClose:!1,closeBtn:!1,title:!1,content:'<div class="png"></div><div class="pngCon">'+content+"</div>",btn:[],time:3e3},msgConfig=options||{};$.extend(defaultConfig,msgConfig);var o=new PopupBox(defaultConfig);return o.boxIndex},load:function(options){var defaultConfig={type:1,className:"customLayer-load",shadeClassName:"customLayer-loadShade",shade:!0,shadeClose:!1,closeBtn:!1,title:!1,content:'<div class="loading"></div>',btn:[],time:3e3},loadConfig=options||{};$.extend(defaultConfig,loadConfig);var o=new PopupBox(defaultConfig);return o.boxIndex},close:function(index){var elem=$("#customLayer"+index),contentDom=elem.find(".customLayer-content").children(),shadeDom=$("#customLayer-shade"+index);clearTimeout(ready.timer[index]),delete ready.timer[index],shadeDom.remove(),"Object"==elem.attr("contype")?(elem.find(".customLayer-setwin").remove(),elem.find(".customLayer-title").remove(),elem.find(".customLayer-btn").remove(),contentDom.parents(".customLayer-content").unwrap(),contentDom.unwrap().css("display","none")):elem.remove(),"function"==typeof ready.end[index]&&ready.end[index](),delete ready.end[index]},closeAll:function(){var _this=this;$(".customLayer").each(function(){var Index=Number($(this).attr("id").replace("customLayer",""));_this.close(Index)})}},PopupBox=function(options){var that=this;that.config={type:0,className:"",shadeClassName:"",shade:!0,shadeClose:!0,closeBtn:!0,fixed:!0,area:["auto","auto"],maxWidth:360,title:"信息",content:"",btn:[],time:0},$.extend(that.config,options),that.view()};PopupBox.prototype.view=function(){var that=this,config=that.config,noTitle=config.title?"":"customLayer-noTitle",windowW=$(window).width(),windowH=$(window).height(),initialZindex=998,contype=config.content instanceof Object?"Object":"String";that.boxIndex=++ready.index;var titleStr='<div class="customLayer-title">'+config.title+"</div>",shadeStr='<div class="customLayer-shade '+config.shadeClassName+'" id="customLayer-shade'+that.boxIndex+'" style="z-index: '+(initialZindex+that.boxIndex-1)+';"></div>',closeBtnStr='<div class="customLayer-setwin"><a href="javascript:void(0);" class="customLayer-close"></a></div>',btnStr="";if(config.btn.length>0){btnStr+='<div class="customLayer-btn">';for(var i=0;i<(config.btn.length>2?2:config.btn.length);i++)btnStr+='<a href="javascript:void(0);" class="customLayer-btn'+i+'">'+config.btn[i]+"</a>";btnStr+="</div>"}if("Object"==contype)config.content.css("display","block").wrap('<div class="customLayer '+config.className+" "+noTitle+'" id="customLayer'+that.boxIndex+'" contype="'+contype+'" style="z-index: '+(initialZindex+that.boxIndex)+';"><div class="customLayer-content"></div></div>'),config.title&&config.content.parents(".customLayer").prepend(titleStr),config.closeBtn&&config.content.parents(".customLayer").prepend(closeBtnStr),config.btn.length>0&&config.content.parents(".customLayer").append(btnStr);else{var domStr='<div class="customLayer '+config.className+" "+noTitle+'" id="customLayer'+that.boxIndex+'" contype="'+contype+'" style="z-index: '+(initialZindex+that.boxIndex)+'">';config.title&&(domStr+=titleStr),config.closeBtn&&(domStr+=closeBtnStr),domStr+='<div class="customLayer-content">',domStr+=config.content,domStr+="</div>",config.btn.length>0&&(domStr+=btnStr),domStr+="</div>",$("body").append(domStr)}config.shade&&$("body").append(shadeStr);var elem=$("#customLayer"+that.boxIndex);config.fixed||elem.css("position","absolute"),config.area[0]=function(){var a;return a="auto"==config.area[0]?elem.width()>config.maxWidth?config.maxWidth:elem.width():config.area[0]}(),elem.width(config.area[0]),config.area[1]=function(){var a;return a="auto"==config.area[1]?elem.height()>config.maxHeight?config.maxHeight:elem.height():config.area[1]}(),elem.height(config.area[1]);var boxX=(windowW-config.area[0])/2,boxY=function(){return windowH>config.area[1]?(windowH-config.area[1])/2+(config.fixed?0:$(document).scrollTop()):config.fixed?0:$(document).scrollTop()}(),titleH=null==elem.find(".customLayer-title").outerHeight()?0:elem.find(".customLayer-title").outerHeight(),btnH=null==elem.find(".customLayer-btn").outerHeight()?0:elem.find(".customLayer-btn").outerHeight();elem.addClass("customLayer-anim-scale").css({top:boxY+"px",left:boxX+"px"}),0==config.type&&elem.find(".customLayer-content").css({height:config.area[1]-titleH-btnH+"px"}),setTimeout(function(){elem.removeClass("customLayer-anim-scale")},300),"function"==typeof config.success&&config.success(that.boxIndex,elem),that.action(config,elem)},PopupBox.prototype.action=function(config,elem){var that=this,closeBtnDom=elem.find("a.customLayer-close"),shadeDom=$("#customLayer-shade"+that.boxIndex),confirmBtnDom=elem.find(".customLayer-btn0"),cancelBtnDom=elem.find(".customLayer-btn1");config.end&&(ready.end[that.boxIndex]=config.end),config.shadeClose&&shadeDom.off("click").on("click",function(){popupBox.close(that.boxIndex)}),config.closeBtn&&closeBtnDom.on("click",function(){var isClose=config.cancel&&config.cancel(that.boxIndex,elem);isClose==undefined&&popupBox.close(that.boxIndex)}),config.time&&(ready.timer[that.boxIndex]=setTimeout(function(){popupBox.close(that.boxIndex)},config.time)),config.btn.length>0&&(confirmBtnDom.on("click",function(){var isClose=config.yes&&config.yes(that.boxIndex,elem);isClose==undefined&&popupBox.close(that.boxIndex)}),cancelBtnDom.on("click",function(){popupBox.close(that.boxIndex)}))},window.popupBox=popupBox,module.exports=popupBox}(window,document)});