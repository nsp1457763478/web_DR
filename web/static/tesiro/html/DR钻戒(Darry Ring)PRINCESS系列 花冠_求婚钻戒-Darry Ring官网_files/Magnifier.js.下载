/*!uglify*/
define(function(require,exports,module){function Magnifier(id,opt){this.defaults={pPath:"",sWidth:100,sHeight:100,sOpacity:.4,pWidth:500,pHeight:500,mLeft:25,mTop:0};var _this=this;if(this.obj=document.getElementById(id),opt)for(var o in opt)this.defaults[o]=opt[o];this.defaults.pPath=""==this.defaults.pPath?this.obj.getElementsByTagName("img")[0].src:this.defaults.pPath,this.posX=0,this.posY=0,this.oSmall=null,this.bigElement=null,this.bigImage=null,this.obj.onmouseover=function(e){_this.enter(e)}}require("jquery"),Magnifier.prototype.enter=function(e){var _this=this,e=e||event;if(null==this.oSmall?(this.oSmall=document.createElement("span"),this.oSmall.style.position="absolute",this.oSmall.style.left=0,this.oSmall.style.top=0,this.oSmall.style.display="block",this.oSmall.style.width=this.defaults.sWidth+"px",this.oSmall.style.height=this.defaults.sHeight+"px",this.oSmall.style.background="#999",this.oSmall.style.border="1px solid #000",this.oSmall.style.cursor="move",this.oSmall.style.opacity=this.defaults.sOpacity,this.oSmall.style.filter="alpha(opacity="+100*this.defaults.sOpacity+")",this.oSmall.style.zoom=1,this.obj.appendChild(this.oSmall)):this.oSmall.style.display="block",null==this.bigElement){this.bigElement=document.createElement("div"),this.bigImage=document.createElement("img");var img=new Image,_this=this;img.src=this.defaults.pPath,this.bigImage.src=this.defaults.pPath,this.bigElement.appendChild(this.bigImage),this.obj.appendChild(this.bigElement),this.bigImage.style.position="absolute",img.onload=function(){_this.bigImage.style.width=img.width+"px",_this.bigImage.style.height=img.height+"px"},this.bigElement.style.position="absolute",this.bigElement.style.overflow="hidden",this.bigElement.style.width=this.defaults.pWidth+"px",this.bigElement.style.height=this.defaults.pHeight+"px",this.bigElement.style.top=this.defaults.mTop+"px",this.bigElement.style.right=-(parseInt(this.css(this.bigElement,"width"))+this.defaults.mLeft)+"px",this.bigElement.style.border="1px solid #ccc",this.bigElement.style.zIndex="99998"}else this.bigElement.style.display="block";this.posX=$(this.obj).offset().left+this.oSmall.offsetWidth/2,this.posY=$(this.obj).offset().top+this.oSmall.offsetHeight/2,document.onmousemove=function(e){_this.move(e)},this.obj.onmouseout=function(){_this.out()}},Magnifier.prototype.move=function(e){var e=e||event,tt=document.documentElement.scrollTop||document.body.scrollTop,ll=document.documentElement.scrollLeft||document.body.scrollLeft,l=ll+e.clientX-this.posX,t=tt+e.clientY-this.posY;l<0?l=0:l>this.obj.offsetWidth-this.oSmall.offsetWidth&&(l=this.obj.offsetWidth-this.oSmall.offsetWidth),t<0?t=0:t>this.obj.offsetHeight-this.oSmall.offsetHeight&&(t=this.obj.offsetHeight-this.oSmall.offsetHeight),this.oSmall.style.left=l+"px",this.oSmall.style.top=t+"px";var percentX=l/(this.oSmall.offsetWidth-this.obj.offsetWidth),percentY=t/(this.oSmall.offsetHeight-this.obj.offsetHeight);this.bigImage.style.left=percentX*(this.bigImage.offsetWidth-this.bigElement.offsetWidth)+"px",this.bigImage.style.top=percentY*(this.bigImage.offsetHeight-this.bigElement.offsetHeight)+"px"},Magnifier.prototype.out=function(e){document.onmousemove=null,this.oSmall.style.display="none",this.bigElement.style.display="none"},Magnifier.prototype.css=function(obj,attr){return obj.currentStyle?obj.currentStyle[attr]:window.getComputedStyle(obj,null)[attr]},module.exports=Magnifier});